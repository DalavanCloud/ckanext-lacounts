{% ckan_extends %}
{% set intro = g.site_intro_text %}

{# It doesn't work inside `macros/editable.html' #}
{% macro editable_region(name) -%}
<div data-editable data-name="{{ name }}">
  {{ h.get_editable_region(name) | safe or caller() | safe }}
</div>
{%- endmacro %}

{% block scripts %}
  {{ super() }}
  {% resource 'lacounts/home.js' %}
  {% if h.check_access('sysadmin') %}
    {% resource 'lacounts/editable' %}
  {% endif %}
{% endblock %}

{% block bodytag %} {{ super() }} class="home"{% endblock %}

{% block content %}
<section class="hero">
  <div class="images">
    <img src="images/banner.jpg" alt="" />
  </div>
  <div class="container">
    {% if intro %}
      {{ h.render_markdown(intro) }}
    {% else %}
      {% call editable_region('hero') %}
        <h1>Advocacy for data + Data for advocacy</h1>
        <p>We're LA Counts, a tool for change powered by a community of advocates. Together we collect, curate, and explore open data about Los Angeles County and use it to improve the lives of all Angelenos. Explore the site, learn from the community, and join our movement.</p>
      {% endcall %}
    {% endif %}
    {% snippet 'home/snippets/search.html' %}
  </div>
</section>
{{ super() }}
{% endblock %}
